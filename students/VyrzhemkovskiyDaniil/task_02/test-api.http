# Sports Venues API Testing
# РСЃРїРѕР»СЊР·СѓР№С‚Рµ VS Code extension: REST Client

@baseUrl = http://localhost:3000/api

### ========================================
### HEALTH CHECK
### ========================================

### Health Check
GET http://localhost:3000/health

### API Info
GET {{baseUrl}}

### ========================================
### AUTH ENDPOINTS
### ========================================

### 1. Р РµРіРёСЃС‚СЂР°С†РёСЏ РЅРѕРІРѕРіРѕ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "testuser@example.com",
  "password": "password123",
  "name": "РўРµСЃС‚РѕРІС‹Р№ РџРѕР»СЊР·РѕРІР°С‚РµР»СЊ",
  "phone": "+375291234567"
}

### 2. Р’С…РѕРґ Р°РґРјРёРЅР° (РґР»СЏ РїРѕР»СѓС‡РµРЅРёСЏ admin С‚РѕРєРµРЅР°)
# @name loginAdmin
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "admin@sports-venues.com",
  "password": "password123"
}

### РЎРѕС…СЂР°РЅРёС‚СЊ admin С‚РѕРєРµРЅ
@adminToken = {{loginAdmin.response.body.data.token}}

### 3. Р’С…РѕРґ РѕР±С‹С‡РЅРѕРіРѕ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
# @name loginUser
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "ivan.ivanov@example.com",
  "password": "password123"
}

### РЎРѕС…СЂР°РЅРёС‚СЊ user С‚РѕРєРµРЅ
@userToken = {{loginUser.response.body.data.token}}

### 4. РџРѕР»СѓС‡РёС‚СЊ С‚РµРєСѓС‰РµРіРѕ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ (admin)
GET {{baseUrl}}/auth/me
Authorization: Bearer {{adminToken}}

### 5. РџРѕР»СѓС‡РёС‚СЊ С‚РµРєСѓС‰РµРіРѕ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ (user)
GET {{baseUrl}}/auth/me
Authorization: Bearer {{userToken}}

### ========================================
### VENUES ENDPOINTS
### ========================================

### 6. РџРѕР»СѓС‡РёС‚СЊ РІСЃРµ РїР»РѕС‰Р°РґРєРё (Р±РµР· С„РёР»СЊС‚СЂРѕРІ)
GET {{baseUrl}}/venues

### 7. РџРѕР»СѓС‡РёС‚СЊ РїР»РѕС‰Р°РґРєРё СЃ РїР°РіРёРЅР°С†РёРµР№
GET {{baseUrl}}/venues?page=1&limit=5

### 8. Р¤РёР»СЊС‚СЂ РїРѕ С‚РёРїСѓ (С„СѓС‚Р±РѕР»)
GET {{baseUrl}}/venues?type=FOOTBALL

### 9. Р¤РёР»СЊС‚СЂ РїРѕ С†РµРЅРµ
GET {{baseUrl}}/venues?priceMin=20&priceMax=50

### 10. РџРѕРёСЃРє РїРѕ РЅР°Р·РІР°РЅРёСЋ
GET {{baseUrl}}/venues?search=Р”РёРЅР°РјРѕ

### 11. РЎРѕСЂС‚РёСЂРѕРІРєР° РїРѕ С†РµРЅРµ (РІРѕР·СЂР°СЃС‚Р°РЅРёРµ)
GET {{baseUrl}}/venues?sortBy=pricePerHour&order=asc

### 12. РљРѕРјР±РёРЅРёСЂРѕРІР°РЅРЅС‹Рµ С„РёР»СЊС‚СЂС‹
GET {{baseUrl}}/venues?type=BASKETBALL&priceMax=40&page=1&limit=10&sortBy=pricePerHour&order=asc

### 13. РџРѕР»СѓС‡РёС‚СЊ РґРµС‚Р°Р»Рё РїР»РѕС‰Р°РґРєРё
# @name getVenue
GET {{baseUrl}}/venues
###
# РСЃРїРѕР»СЊР·СѓР№С‚Рµ ID РёР· РїСЂРµРґС‹РґСѓС‰РµРіРѕ РѕС‚РІРµС‚Р°
@venueId = {{getVenue.response.body.data.venues[0].id}}

GET {{baseUrl}}/venues/{{venueId}}

### 14. РЎРѕР·РґР°С‚СЊ РїР»РѕС‰Р°РґРєСѓ (Admin only) вњ…
POST {{baseUrl}}/venues
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "name": "РќРѕРІР°СЏ С„СѓС‚Р±РѕР»СЊРЅР°СЏ РїР»РѕС‰Р°РґРєР°",
  "type": "FOOTBALL",
  "address": "Рі. РњРёРЅСЃРє, СѓР». РќРѕРІР°СЏ 10",
  "description": "РћС‚Р»РёС‡РЅР°СЏ РїР»РѕС‰Р°РґРєР° РґР»СЏ С„СѓС‚Р±РѕР»Р°",
  "pricePerHour": 45.0,
  "imageUrl": "https://example.com/new-venue.jpg",
  "amenities": ["Р”СѓС€", "Р Р°Р·РґРµРІР°Р»РєР°", "РџР°СЂРєРѕРІРєР°", "РћСЃРІРµС‰РµРЅРёРµ"],
  "isActive": true
}

### 15. РћР±РЅРѕРІРёС‚СЊ РїР»РѕС‰Р°РґРєСѓ (Admin only) вњ…
# @name createVenue
POST {{baseUrl}}/venues
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "name": "РџР»РѕС‰Р°РґРєР° РґР»СЏ РѕР±РЅРѕРІР»РµРЅРёСЏ",
  "type": "TENNIS",
  "address": "Рі. РњРёРЅСЃРє, СѓР». РўРµСЃС‚РѕРІР°СЏ 1",
  "pricePerHour": 30.0
}

###
@newVenueId = {{createVenue.response.body.data.id}}

PUT {{baseUrl}}/venues/{{newVenueId}}
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "name": "РћР±РЅРѕРІР»С‘РЅРЅРѕРµ РЅР°Р·РІР°РЅРёРµ РїР»РѕС‰Р°РґРєРё",
  "pricePerHour": 35.0,
  "description": "Р”РѕР±Р°РІР»РµРЅРѕ РѕРїРёСЃР°РЅРёРµ"
}

### 16. РЈРґР°Р»РёС‚СЊ РїР»РѕС‰Р°РґРєСѓ (Admin only) вњ…
DELETE {{baseUrl}}/venues/{{newVenueId}}
Authorization: Bearer {{adminToken}}

### ========================================
### ERROR CASES (РўРµСЃС‚С‹ РІР°Р»РёРґР°С†РёРё)
### ========================================

### вќЊ Р РµРіРёСЃС‚СЂР°С†РёСЏ СЃ РЅРµРІР°Р»РёРґРЅС‹Рј email
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "not-an-email",
  "password": "password123",
  "name": "Test"
}

### вќЊ Р РµРіРёСЃС‚СЂР°С†РёСЏ СЃ РєРѕСЂРѕС‚РєРёРј РїР°СЂРѕР»РµРј
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "123",
  "name": "Test User"
}

### вќЊ Р РµРіРёСЃС‚СЂР°С†РёСЏ СЃ СЃСѓС‰РµСЃС‚РІСѓСЋС‰РёРј email
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "admin@sports-venues.com",
  "password": "password123",
  "name": "Admin Duplicate"
}

### вќЊ Р’С…РѕРґ СЃ РЅРµРІРµСЂРЅС‹Рј РїР°СЂРѕР»РµРј
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "admin@sports-venues.com",
  "password": "wrongpassword"
}

### вќЊ РџРѕР»СѓС‡РёС‚СЊ РїСЂРѕС„РёР»СЊ Р±РµР· С‚РѕРєРµРЅР°
GET {{baseUrl}}/auth/me

### вќЊ РџРѕР»СѓС‡РёС‚СЊ РїСЂРѕС„РёР»СЊ СЃ РЅРµРІР°Р»РёРґРЅС‹Рј С‚РѕРєРµРЅРѕРј
GET {{baseUrl}}/auth/me
Authorization: Bearer invalid-token-here

### вќЊ РЎРѕР·РґР°С‚СЊ РїР»РѕС‰Р°РґРєСѓ Р±РµР· Р°РІС‚РѕСЂРёР·Р°С†РёРё
POST {{baseUrl}}/venues
Content-Type: application/json

{
  "name": "Test Venue",
  "type": "FOOTBALL",
  "address": "Test Address",
  "pricePerHour": 30.0
}

### вќЊ РЎРѕР·РґР°С‚СЊ РїР»РѕС‰Р°РґРєСѓ СЃ СЂРѕР»СЊСЋ USER (РґРѕР»Р¶РЅРѕ РІРµСЂРЅСѓС‚СЊ 403)
POST {{baseUrl}}/venues
Authorization: Bearer {{userToken}}
Content-Type: application/json

{
  "name": "User Venue",
  "type": "FOOTBALL",
  "address": "Test Address",
  "pricePerHour": 30.0
}

### вќЊ РЎРѕР·РґР°С‚СЊ РїР»РѕС‰Р°РґРєСѓ СЃ РЅРµРІР°Р»РёРґРЅС‹РјРё РґР°РЅРЅС‹РјРё
POST {{baseUrl}}/venues
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "name": "A",
  "type": "INVALID_TYPE",
  "address": "X",
  "pricePerHour": -10
}

### вќЊ РџРѕР»СѓС‡РёС‚СЊ РЅРµСЃСѓС‰РµСЃС‚РІСѓСЋС‰СѓСЋ РїР»РѕС‰Р°РґРєСѓ
GET {{baseUrl}}/venues/00000000-0000-0000-0000-000000000000

### вќЊ РћР±РЅРѕРІРёС‚СЊ РЅРµСЃСѓС‰РµСЃС‚РІСѓСЋС‰СѓСЋ РїР»РѕС‰Р°РґРєСѓ
PUT {{baseUrl}}/venues/00000000-0000-0000-0000-000000000000
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "name": "Test"
}

### вќЊ РЈРґР°Р»РёС‚СЊ РЅРµСЃСѓС‰РµСЃС‚РІСѓСЋС‰СѓСЋ РїР»РѕС‰Р°РґРєСѓ
DELETE {{baseUrl}}/venues/00000000-0000-0000-0000-000000000000
Authorization: Bearer {{adminToken}}
### ========================================
### SLOTS ENDPOINTS
### ========================================

### 1. РџРѕР»СѓС‡РёС‚СЊ РІСЃРµ СЃР»РѕС‚С‹
GET {{baseUrl}}/slots

### 2. РџРѕР»СѓС‡РёС‚СЊ СЃР»РѕС‚С‹ РґР»СЏ РєРѕРЅРєСЂРµС‚РЅРѕР№ РїР»РѕС‰Р°РґРєРё
GET {{baseUrl}}/slots?venueId={{venueId}}

### 3. РџРѕР»СѓС‡РёС‚СЊ СЃР»РѕС‚С‹ РЅР° РєРѕРЅРєСЂРµС‚РЅСѓСЋ РґР°С‚Сѓ (YYYY-MM-DD)
GET {{baseUrl}}/slots?date=2025-01-05

### 4. РџРѕР»СѓС‡РёС‚СЊ СЃР»РѕС‚С‹ Р·Р° РґРёР°РїР°Р·РѕРЅ РґР°С‚
GET {{baseUrl}}/slots?startDate=2025-01-05T00:00:00Z&endDate=2025-01-07T23:59:59Z

### 5. РџРѕР»СѓС‡РёС‚СЊ С‚РѕР»СЊРєРѕ РґРѕСЃС‚СѓРїРЅС‹Рµ СЃР»РѕС‚С‹
GET {{baseUrl}}/slots?status=AVAILABLE

### 6. РџРѕР»СѓС‡РёС‚СЊ СЃР»РѕС‚С‹ РїР»РѕС‰Р°РґРєРё РЅР° РґР°С‚Сѓ СЃ С„РёР»СЊС‚СЂРѕРј РїРѕ СЃС‚Р°С‚СѓСЃСѓ
GET {{baseUrl}}/slots?venueId={{venueId}}&date=2025-01-06&status=AVAILABLE

### 7. РџРѕР»СѓС‡РёС‚СЊ СЃР»РѕС‚С‹ СЃ РїР°РіРёРЅР°С†РёРµР№
GET {{baseUrl}}/slots?page=1&limit=10

### 8. РџРѕР»СѓС‡РёС‚СЊ СЃР»РѕС‚ РїРѕ ID
# @name getSlot
GET {{baseUrl}}/slots/{{slotId}}

### РЎРѕС…СЂР°РЅРёС‚СЊ ID СЃР»РѕС‚Р°
@slotId = {{getSlot.response.body.id}}

### 9. РЎРѕР·РґР°С‚СЊ РЅРѕРІС‹Р№ СЃР»РѕС‚ (С‚РѕР»СЊРєРѕ ADMIN/OWNER)
# @name createSlot
POST {{baseUrl}}/slots
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "venueId": "{{venueId}}",
  "startTime": "2025-01-10T09:00:00Z",
  "endTime": "2025-01-10T10:30:00Z",
  "status": "AVAILABLE"
}

### РЎРѕС…СЂР°РЅРёС‚СЊ ID СЃРѕР·РґР°РЅРЅРѕРіРѕ СЃР»РѕС‚Р°
@newSlotId = {{createSlot.response.body.id}}

### 10. РњР°СЃСЃРѕРІРѕРµ СЃРѕР·РґР°РЅРёРµ СЃР»РѕС‚РѕРІ (С‚РѕР»СЊРєРѕ ADMIN/OWNER)
# РЎРѕР·РґР°РµРј СЃР»РѕС‚С‹ РЅР° 3 РґРЅСЏ СЃ 3 РІСЂРµРјРµРЅРЅС‹РјРё РёРЅС‚РµСЂРІР°Р»Р°РјРё
POST {{baseUrl}}/slots/bulk
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "venueId": "{{venueId}}",
  "dates": ["2025-01-15", "2025-01-16", "2025-01-17"],
  "timeSlots": [
    { "startTime": "09:00", "endTime": "11:00" },
    { "startTime": "12:00", "endTime": "14:00" },
    { "startTime": "16:00", "endTime": "18:00" }
  ],
  "status": "AVAILABLE"
}

### 11. РћР±РЅРѕРІРёС‚СЊ СЃС‚Р°С‚СѓСЃ СЃР»РѕС‚Р° (С‚РѕР»СЊРєРѕ ADMIN/OWNER)
PUT {{baseUrl}}/slots/{{newSlotId}}
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "status": "BLOCKED"
}

### 12. РћР±РЅРѕРІРёС‚СЊ РІСЂРµРјСЏ СЃР»РѕС‚Р° (С‚РѕР»СЊРєРѕ ADMIN/OWNER)
PUT {{baseUrl}}/slots/{{newSlotId}}
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "startTime": "2025-01-10T10:00:00Z",
  "endTime": "2025-01-10T11:30:00Z"
}

### 13. РЈРґР°Р»РёС‚СЊ СЃР»РѕС‚ (С‚РѕР»СЊРєРѕ ADMIN/OWNER)
DELETE {{baseUrl}}/slots/{{newSlotId}}
Authorization: Bearer {{adminToken}}

### ========================================
### SLOTS - ERROR CASES
### ========================================

### вќЊ РЎРѕР·РґР°С‚СЊ СЃР»РѕС‚ Р±РµР· Р°РІС‚РѕСЂРёР·Р°С†РёРё
POST {{baseUrl}}/slots
Content-Type: application/json

{
  "venueId": "{{venueId}}",
  "startTime": "2025-01-10T09:00:00Z",
  "endTime": "2025-01-10T10:30:00Z"
}

### вќЊ РЎРѕР·РґР°С‚СЊ СЃР»РѕС‚ РѕР±С‹С‡РЅС‹Рј РїРѕР»СЊР·РѕРІР°С‚РµР»РµРј (РЅРµ OWNER Рё РЅРµ ADMIN)
POST {{baseUrl}}/slots
Authorization: Bearer {{userToken}}
Content-Type: application/json

{
  "venueId": "{{venueId}}",
  "startTime": "2025-01-10T09:00:00Z",
  "endTime": "2025-01-10T10:30:00Z"
}

### вќЊ РЎРѕР·РґР°С‚СЊ СЃР»РѕС‚ СЃ РЅРµРєРѕСЂСЂРµРєС‚РЅС‹РјРё РґР°РЅРЅС‹РјРё (endTime СЂР°РЅСЊС€Рµ startTime)
POST {{baseUrl}}/slots
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "venueId": "{{venueId}}",
  "startTime": "2025-01-10T10:00:00Z",
  "endTime": "2025-01-10T09:00:00Z"
}

### вќЊ РЎРѕР·РґР°С‚СЊ СЃР»РѕС‚ РґР»СЏ РЅРµСЃСѓС‰РµСЃС‚РІСѓСЋС‰РµР№ РїР»РѕС‰Р°РґРєРё
POST {{baseUrl}}/slots
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "venueId": "00000000-0000-0000-0000-000000000000",
  "startTime": "2025-01-10T09:00:00Z",
  "endTime": "2025-01-10T10:30:00Z"
}

### вќЊ РЎРѕР·РґР°С‚СЊ РїРµСЂРµСЃРµРєР°СЋС‰РёР№СЃСЏ СЃР»РѕС‚
# РЎРЅР°С‡Р°Р»Р° СЃРѕР·РґР°Р№С‚Рµ СЃР»РѕС‚ РЅР° 09:00-10:30, РїРѕС‚РѕРј РїРѕРїСЂРѕР±СѓР№С‚Рµ СЃРѕР·РґР°С‚СЊ РЅР° 10:00-11:30
POST {{baseUrl}}/slots
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "venueId": "{{venueId}}",
  "startTime": "2025-01-10T10:00:00Z",
  "endTime": "2025-01-10T11:30:00Z"
}

### вќЊ РџРѕР»СѓС‡РёС‚СЊ РЅРµСЃСѓС‰РµСЃС‚РІСѓСЋС‰РёР№ СЃР»РѕС‚
GET {{baseUrl}}/slots/00000000-0000-0000-0000-000000000000
### ========================================
### BOOKINGS ENDPOINTS
### ========================================

### 1. Проверить доступность слота
GET {{baseUrl}}/bookings/check/{{slotId}}

### 2. Получить все бронирования (для текущего пользователя)
GET {{baseUrl}}/bookings
Authorization: Bearer {{userToken}}

### 3. Получить все бронирования (админ видит все)
GET {{baseUrl}}/bookings
Authorization: Bearer {{adminToken}}

### 4. Получить бронирования с фильтрами
# По статусу
GET {{baseUrl}}/bookings?status=CONFIRMED
Authorization: Bearer {{adminToken}}

# По площадке
GET {{baseUrl}}/bookings?venueId={{venueId}}
Authorization: Bearer {{adminToken}}

# По датам
GET {{baseUrl}}/bookings?startDate=2025-01-05T00:00:00Z&endDate=2025-01-10T23:59:59Z
Authorization: Bearer {{userToken}}

# С пагинацией
GET {{baseUrl}}/bookings?page=1&limit=5
Authorization: Bearer {{userToken}}

### 5. Получить конкретное бронирование по ID
GET {{baseUrl}}/bookings/{{bookingId}}
Authorization: Bearer {{userToken}}

### 6. Создать новое бронирование
# @name createBooking
POST {{baseUrl}}/bookings
Authorization: Bearer {{userToken}}
Content-Type: application/json

{
  \"slotId\": \"{{slotId}}\",
  \"notes\": \"Бронирование для тренировки команды\"
}

### Сохранить ID созданного бронирования
@bookingId = {{createBooking.response.body.id}}

### 7. Отменить бронирование (с причиной)
POST {{baseUrl}}/bookings/{{bookingId}}/cancel
Authorization: Bearer {{userToken}}
Content-Type: application/json

{
  \"reason\": \"Изменились планы\"
}

### 8. Отменить бронирование (без причины)
POST {{baseUrl}}/bookings/{{bookingId}}/cancel
Authorization: Bearer {{userToken}}

### 9. Обновить статус бронирования (только ADMIN)
# Подтвердить бронирование
PUT {{baseUrl}}/bookings/{{bookingId}}/status
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  \"status\": \"CONFIRMED\"
}

### 10. Завершить бронирование (только ADMIN)
PUT {{baseUrl}}/bookings/{{bookingId}}/status
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  \"status\": \"COMPLETED\"
}

### ========================================
### BOOKINGS - ERROR CASES
### ========================================

### ? Создать бронирование без авторизации
POST {{baseUrl}}/bookings
Content-Type: application/json

{
  \"slotId\": \"{{slotId}}\"
}

### ? Создать бронирование для несуществующего слота
POST {{baseUrl}}/bookings
Authorization: Bearer {{userToken}}
Content-Type: application/json

{
  \"slotId\": \"00000000-0000-0000-0000-000000000000\"
}

### ? Создать бронирование для уже забронированного слота
POST {{baseUrl}}/bookings
Authorization: Bearer {{userToken}}
Content-Type: application/json

{
  \"slotId\": \"{{slotId}}\"
}

### ? Получить несуществующее бронирование
GET {{baseUrl}}/bookings/00000000-0000-0000-0000-000000000000
Authorization: Bearer {{userToken}}
