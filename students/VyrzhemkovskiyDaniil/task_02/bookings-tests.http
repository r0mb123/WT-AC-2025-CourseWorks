@baseUrl = http://localhost:3000/api

# Получите эти значения из test-api.http:
# 1. Сначала выполните loginAdmin и loginUser в test-api.http
# 2. Скопируйте токены сюда
# 3. Получите venueId из списка площадок
# 4. Получите slotId из списка слотов для выбранной площадки

# Замените на реальные значения:
@adminToken = your-admin-token-here
@userToken = your-user-token-here
@venueId = your-venue-id-here
@slotId = your-slot-id-here
@bookingId = will-be-set-after-creating-booking

### ========================================
### BOOKINGS ENDPOINTS
### ========================================

### 1. Проверить доступность слота
GET {{baseUrl}}/bookings/check/{{slotId}}

### 2. Получить все бронирования (для текущего пользователя)
GET {{baseUrl}}/bookings
Authorization: Bearer {{userToken}}

### 3. Получить все бронирования (админ видит все)
GET {{baseUrl}}/bookings
Authorization: Bearer {{adminToken}}

### 4. Получить бронирования с фильтрами
# По статусу
GET {{baseUrl}}/bookings?status=CONFIRMED
Authorization: Bearer {{adminToken}}

# По площадке
GET {{baseUrl}}/bookings?venueId={{venueId}}
Authorization: Bearer {{adminToken}}

# По датам
GET {{baseUrl}}/bookings?startDate=2025-01-05T00:00:00Z&endDate=2025-01-10T23:59:59Z
Authorization: Bearer {{userToken}}

# С пагинацией
GET {{baseUrl}}/bookings?page=1&limit=5
Authorization: Bearer {{userToken}}

### 5. Получить конкретное бронирование по ID
GET {{baseUrl}}/bookings/{{bookingId}}
Authorization: Bearer {{userToken}}

### 6. Создать новое бронирование
# @name createBooking
POST {{baseUrl}}/bookings
Authorization: Bearer {{userToken}}
Content-Type: application/json

{
  "slotId": "{{slotId}}",
  "notes": "Бронирование для тренировки команды"
}

### Сохранить ID созданного бронирования
@bookingId = {{createBooking.response.body.id}}

### 7. Отменить бронирование (с причиной)
POST {{baseUrl}}/bookings/{{bookingId}}/cancel
Authorization: Bearer {{userToken}}
Content-Type: application/json

{
  "reason": "Изменились планы"
}

### 8. Отменить бронирование (без причины)
POST {{baseUrl}}/bookings/{{bookingId}}/cancel
Authorization: Bearer {{userToken}}

### 9. Обновить статус бронирования (только ADMIN)
# Подтвердить бронирование
PUT {{baseUrl}}/bookings/{{bookingId}}/status
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "status": "CONFIRMED"
}

### 10. Завершить бронирование (только ADMIN)
PUT {{baseUrl}}/bookings/{{bookingId}}/status
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "status": "COMPLETED"
}

### ========================================
### BOOKINGS - ERROR CASES
### ========================================

### ❌ Создать бронирование без авторизации
POST {{baseUrl}}/bookings
Content-Type: application/json

{
  "slotId": "{{slotId}}"
}

### ❌ Создать бронирование для несуществующего слота
POST {{baseUrl}}/bookings
Authorization: Bearer {{userToken}}
Content-Type: application/json

{
  "slotId": "00000000-0000-0000-0000-000000000000"
}

### ❌ Создать бронирование для уже забронированного слота
POST {{baseUrl}}/bookings
Authorization: Bearer {{userToken}}
Content-Type: application/json

{
  "slotId": "{{slotId}}"
}

### ❌ Получить несуществующее бронирование
GET {{baseUrl}}/bookings/00000000-0000-0000-0000-000000000000
Authorization: Bearer {{userToken}}
